import{u as s,l as i,k as d,r as _,z as x,g as z,A as j,d as L,e as m,o as P,B as $,w as h,a as p,f as l,t as f,h as B,C as D}from"./index.9da21e19.js";class I{getUserId(){return console.log(s().login),s().login.userId}async getBarangId(t){let a={Accept:"application/json",Authorization:`Bearer ${s().token}`},e={url:d(`/barang/search/subid/${t}`),method:"GET",headers:a};return i(e).then(r=>r.data)}getMasuks(){let t={Accept:"application/json",Authorization:`Bearer ${s().token}`},a={url:d("/masuk/all"),method:"GET",headers:t};return i(a).then(e=>e.data)}getPickBarang(){let t={Accept:"application/json",Authorization:`Bearer ${s().token}`},a={url:d("/barang?all=1"),method:"GET",headers:t};return i(a).then(e=>e.data)}getPickBarangStokAda(){let t={Accept:"application/json",Authorization:`Bearer ${s().token}`},a={url:d("/barang"),method:"GET",headers:t};return i(a).then(e=>e.data)}getBarangByBarcode(t){let a={Accept:"application/json",Authorization:`Bearer ${s().token}`},e={url:d("/barang/barcode/"+t),method:"GET",headers:a};return i(e).then(r=>r.data)}saveMasuk(t,a=!0){let e={Accept:"application/json",Authorization:`Bearer ${s().token}`},r={url:d("/masuk"),method:a?"POST":"PUT",data:t,headers:e};return i(r).then(k=>k.data)}updateBarang(t){let a={Accept:"application/json",Authorization:`Bearer ${s().token}`},e={url:d("/barang"),method:"PUT",data:t,headers:a};return i(e).then(r=>r.data)}saveHargaBaru(t){let a={Accept:"application/json",Authorization:`Bearer ${s().token}`},e={url:d("/barang"),method:"POST",data:t,headers:a};return i(e).then(r=>r.data)}deleteMasuk(t){let a={Accept:"application/json",Authorization:`Bearer ${s().token}`},e={url:d(`/masuk/${t}`),method:"DELETE",headers:a};return i(e).then(r=>r.data)}}const M={class:"card"},q={class:"flex flex-row justify-content-between align-items-center"},C={class:"w-18rem block p-input-icon-left"},E=p("i",{class:"pi pi-search"},null,-1),U=B(" Barang tidak ditemukan. Tunggu sebentar... "),V=p("i",{class:"pi pi-spin pi-spinner",style:{"font-size":"2rem","margin-left":"2rem"}},null,-1),N={class:"flex justify-content-center",style:{width:"100%"}},G=p("span",{class:"p-column-title"},"Harga Satuan",-1),R={__name:"PickBarang",emits:["selected"],setup(b,{emit:t}){const a=new I,e=_(!1),r=_(),k=_(!1),g=x({global:{value:null,matchMode:z.CONTAINS}}),v=()=>{e.value=!1},A=c=>{t("selected",c.data)};j.on("pick-barang-dialog",c=>{e.value=c.visible,r.value=[],c.stokKeluar?a.getPickBarangStokAda().then(n=>{r.value=n}):a.getPickBarang().then(n=>{r.value=n})});const y=c=>{if(c){var n=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"});return n.format(c)}};return L(()=>{k.value=!0}),(c,n)=>{const S=m("InputText"),T=m("Button"),u=m("Column"),O=m("DataTable"),w=m("Dialog");return P(),$(w,{visible:e.value,"onUpdate:visible":n[2]||(n[2]=o=>e.value=o),style:{width:"1024px"},header:"Pilih Barang",modal:!0,class:"p-fluid"},{default:h(()=>[p("div",M,[l(O,{value:r.value,selectionMode:"single",dataKey:"id",responsiveLayout:"scroll",scrollable:"",scrollHeight:"400px",virtualScrollerOptions:{itemSize:46},filters:g,"onUpdate:filters":n[1]||(n[1]=o=>D(g)?g.value=o:null),filterDisplay:"menu",onRowSelect:A},{header:h(()=>[p("div",q,[p("span",C,[E,l(S,{modelValue:g.global.value,"onUpdate:modelValue":n[0]||(n[0]=o=>g.global.value=o),placeholder:"Search..."},null,8,["modelValue"])]),l(T,{label:"Pilih",icon:"pi pi-check",onClick:v,class:"w-12rem p-button-success"})])]),empty:h(()=>[U,V]),default:h(()=>[l(u,{field:"barcode",header:"Barcode"}),l(u,{field:"sub_id",header:"Sub ID"}),l(u,{field:"category",header:"Kategori"}),l(u,{field:"nama_barang",header:"Jenis Barang"}),l(u,{header:"Stok Akhir"},{body:h(o=>[p("span",N,f(o.data.stok+o.data.stok_masuk-o.data.stok_keluar),1)]),_:1}),l(u,{field:"harga_satuan",header:"Harga Satuan"},{body:h(o=>[G,B(" "+f(y(o.data.harga_satuan)),1)]),_:1}),l(u,{field:"uraian",header:"Uraian"})]),_:1},8,["value","filters"])])]),_:1},8,["visible"])}}};export{I as M,R as _};
