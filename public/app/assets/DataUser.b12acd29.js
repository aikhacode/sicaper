import{p as x,u as V,b as C,_ as H,d as Y,r as i,e as J,f as p,o as $,c as E,a as t,g as s,w as d,F as Q,h as W,i as _,t as S,j as X,n as D,k as Z,l as ee,m as le}from"./index.cf94e5d9.js";import{_ as ae}from"./logo-sicaper.2b2cc001.js";const se=new class{reqOptions(o,n){return{url:x(n),method:o,headers:{Accept:"application/json",Authorization:`Bearer ${V().token}`}}}getUsers(){return C(this.reqOptions("GET","/bro")).then(o=>o.data)}delete(o){return C({url:x("/bro/delete/"+o.email),method:"DELETE",headers:{Accept:"application/json",Authorization:`Bearer ${V().token}`}}).then(n=>n.data)}saveUser(o,n=!1){return console.log(o),C({url:x("/bro/update"),method:"POST",data:{name:o.name,email:o.email,password:o.password1,password_confirmation:o.password2,role:o.role,mode:n?"new":"old"},headers:{Accept:"application/json",Authorization:`Bearer ${V().token}`}}).then(e=>e.data)}saveCategory(o=!0,n,e){let c=o?"/categories":`/categories/${n}`;return C({url:x(c),method:o?"POST":"PUT",data:e,headers:{Accept:"application/json",Authorization:`Bearer ${V().token}`}}).then(v=>v.data)}};const u=b=>(Z("data-v-26c5eebc"),b=b(),ee(),b),oe={class:"grid"},te={class:"col-12"},ne={class:"card"},ie=u(()=>t("h5",null,"Users",-1)),de={class:"flex justify-content-between flex-column sm:flex-row"},re={class:"p-input-icon-left mb-2"},ue=u(()=>t("i",{class:"pi pi-search"},null,-1)),ce=_(" No users found. "),me=_(" Loading users data. Please wait. "),pe=u(()=>t("img",{width:"32",src:le},null,-1)),ve={class:"flex align-items-center justify-content-center"},fe=u(()=>t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),_e={key:0},be=_("Anda yakin menghapus "),he=_("?"),we=u(()=>t("div",{class:"text-center mb-5"},[t("img",{src:ae,alt:"Image",height:"40",class:""})],-1)),ge=u(()=>t("label",{for:"name",class:"block text-900 font-medium mb-2"},"Nama",-1)),ye=u(()=>t("label",{for:"email1",class:"block text-900 font-medium mb-2"},"Email",-1)),Ue=u(()=>t("label",{for:"role",class:"block text-900 font-medium mb-2"},"Role",-1)),ke=u(()=>t("label",{for:"password1",class:"block text-900 font-medium mb-2"},"Password",-1)),xe=u(()=>t("label",{for:"password2",class:"block text-900 font-medium mb-2"},"Confirmed Password",-1)),Ve={__name:"DataUser",setup(b){const o=Y(),n=i(null),e=i({}),c=i(!1),v=i(null),y=i(!0),h=i(!1),w=i(!1),T=i(""),f=i(!1),I=i([{name:"Admin",value:"Admin"},{name:"user",value:"user"}]),A=i("user"),g=se,M=()=>{v.value={global:{value:null,matchMode:W.CONTAINS}}},j=()=>{w.value=!0,f.value=!1,T.value="New",c.value=!0,e.value={}},F=r=>{e.value=r,console.log("del",r),h.value=!0},z=()=>{console.log("akan",e.value),g.delete(e.value).then(r=>{o.add({severity:"success",summary:"User deleted",detail:"User deleted",life:3e3}),g.getUsers().then(a=>{n.value=a,y.value=!1}),h.value=!1})},O=r=>{f.value=!1,c.value=!1,T.value="Edit",e.value={...r},w.value=!0,console.log(r)},U=()=>e.value.name&&e.value.email&&e.value.password1!=null&&e.value.password2!=null&&e.value.password1==e.value.password2,L=r=>{f.value=!0,console.log(U()),U()&&(c.value&&(e.value.role=A.value,console.log("nw",e.value)),g.saveUser(e.value,c.value).then(a=>{o.add({severity:"success",summary:"User saved",detail:"User saved",life:3e3}),console.log(a),g.getUsers().then(m=>{n.value=m,y.value=!1}),w.value=!1,c.value=!1}).catch(a=>{console.log(a),o.add({severity:"error",summary:"User failed to saved",detail:"User failed to saved",life:3e3})}))};return M(),J(()=>{g.getUsers().then(r=>{n.value=r,y.value=!1})}),(r,a)=>{const m=p("Button"),N=p("InputText"),k=p("Column"),R=p("DataTable"),B=p("Dialog"),q=p("Dropdown"),P=p("Password"),K=p("Toast");return $(),E(Q,null,[t("div",oe,[t("div",te,[t("div",ne,[ie,s(R,{value:n.value,paginator:!0,class:"p-datatable-gridlines",rows:10,dataKey:"id",rowHover:!0,filters:v.value,"onUpdate:filters":a[1]||(a[1]=l=>v.value=l),filterDisplay:"menu",loading:y.value,responsiveLayout:"scroll",globalFilterFields:["name","email","role"]},{header:d(()=>[t("div",de,[s(m,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:j,ref:"open_new"},null,512),t("span",re,[ue,s(N,{modelValue:v.value.global.value,"onUpdate:modelValue":a[0]||(a[0]=l=>v.value.global.value=l),placeholder:"Keyword Search",style:{width:"100%"}},null,8,["modelValue"])])])]),empty:d(()=>[ce]),loading:d(()=>[me]),default:d(()=>[s(k,{field:"name",header:"Name",style:{"min-width":"12rem"}},{body:d(({data:l})=>[_(S(l.name),1)]),_:1}),s(k,{field:"email",header:"Email",style:{"min-width":"12rem"}},{body:d(({data:l})=>[pe,_(" "+S(l.email),1)]),_:1}),s(k,{field:"role",header:"Role",style:{"min-width":"12rem"}},{body:d(({data:l})=>[_(S(l.role),1)]),_:1}),s(k,{headerStyle:"min-width:10rem;"},{body:d(l=>[s(m,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:G=>O(l.data)},null,8,["onClick"]),s(m,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:G=>F(l.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters","loading"])])])]),s(B,{visible:h.value,"onUpdate:visible":a[3]||(a[3]=l=>h.value=l),style:{width:"450px"},header:"Confirm",modal:!0},{footer:d(()=>[s(m,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:a[2]||(a[2]=l=>h.value=!1)}),s(m,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:z})]),default:d(()=>[t("div",ve,[fe,e.value?($(),E("span",_e,[be,t("b",null,S(e.value.email),1),he])):X("",!0)])]),_:1},8,["visible"]),s(B,{visible:w.value,"onUpdate:visible":a[9]||(a[9]=l=>w.value=l),style:{width:"450px"},header:"User Form - "+T.value,modal:!0},{default:d(()=>[we,t("div",null,[ge,s(N,{id:"name",modelValue:e.value.name,"onUpdate:modelValue":a[4]||(a[4]=l=>e.value.name=l),modelModifiers:{trim:!0},type:"text",class:D(["w-full mb-3",{"p-invalid":f.value&&!e.value.name}])},null,8,["modelValue","class"]),ye,s(N,{id:"email1",modelValue:e.value.email,"onUpdate:modelValue":a[5]||(a[5]=l=>e.value.email=l),modelModifiers:{trim:!0},disabled:!c.value,type:"text",class:D(["w-full mb-3",{"p-invalid":f.value&&!e.value.email}])},null,8,["modelValue","disabled","class"]),Ue,s(q,{modelValue:A.value,"onUpdate:modelValue":a[6]||(a[6]=l=>A.value=l),options:I.value,optionLabel:"name",optionValue:"value",placeholder:"Role"},null,8,["modelValue","options"]),ke,s(P,{id:"password1",modelValue:e.value.password1,"onUpdate:modelValue":a[7]||(a[7]=l=>e.value.password1=l),placeholder:"Password",toggleMask:!0,class:D(["w-full mb-3",{"p-invalid":f.value&&!U()}]),inputClass:"w-full",inputStyle:"padding:1rem"},null,8,["modelValue","class"]),xe,s(P,{id:"password2",modelValue:e.value.password2,"onUpdate:modelValue":a[8]||(a[8]=l=>e.value.password2=l),placeholder:"Password",toggleMask:!0,class:D(["w-full mb-3",{"p-invalid":f.value&&!U()}]),inputClass:"w-full",inputStyle:"padding:1rem"},null,8,["modelValue","class"]),s(m,{label:"Save",icon:"pi pi-user",class:"w-full",onClick:L})])]),_:1},8,["visible","header"]),s(K)],64)}}},Te=H(Ve,[["__scopeId","data-v-26c5eebc"]]);export{Te as default};
